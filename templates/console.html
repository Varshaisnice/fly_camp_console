<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test FlyCamp</title>
  <style>
    .screen { display: none; }
    .screen.active { display: block; }
    .card { cursor: pointer; padding: 20px; margin: 10px; border: 1px solid #bf00ff; }
    .card * { pointer-events: none; }
    .card { pointer-events: auto; }
  </style>
</head>
<body>
  <div class="screen active" id="page_choose_game">
    <div class="card-container" id="game-card-container">
      <article class="card" data-game-id="1" data-title="Hover & Seek" data-desc="Test game" data-video="/static/assets/video1.mp4">
        <h2>Hover & Seek</h2>
      </article>
      <article class="card" data-game-id="2" data-title="Hue’s the Boss" data-desc="Test game 2" data-video="/static/assets/video1.mp4">
        <h2>Hue’s the Boss</h2>
      </article>
    </div>
  </div>
  <div class="screen" id="page_confirm">
    <h2 id="chosen-game-title">You chose:</h2>
    <p id="chosen-game-desc"></p>
    <div id="video-overlay" style="display: none;">
      <video id="game-video" data-src="" playsinline></video>
      <button id="close-video">Close</button>
      <button id="corner-progress"></button>
    </div>
  </div>
  <script>
    const qs = (s, r = document) => r.querySelector(s);
    const qsa = (s, r = document) => Array.from(r.querySelectorAll(s));
    
    let selectedGameId, selectedGameTitle, selectedGameDesc;
    
    function goToPage(id) {
      console.log('goToPage:', id);
      qsa('.screen').forEach(s => s.classList.remove('active'));
      const pageEl = qs(`#${id}`);
      if (pageEl) {
        pageEl.classList.add('active');
      } else {
        console.error('Page not found:', id);
      }
    }
    
    function initializeCardSlider(selector) {
      const slider = qs(selector);
      if (!slider) {
        console.error('Slider not found:', selector);
        return;
      }
      const cards = qsa('.card', slider);
      if (cards.length === 0) {
        console.error('No cards found');
        return;
      }
      console.log('Found cards:', cards.length);
      cards.forEach((card, index) => {
        card.addEventListener('click', () => {
          console.log(`Card ${index + 1} clicked:`, card.dataset.gameId);
          selectedGameId = parseInt(card.getAttribute('data-game-id'), 10);
          selectedGameTitle = card.getAttribute('data-title') || '';
          selectedGameDesc = card.getAttribute('data-desc') || '';
          const src = card.getAttribute('data-video') || '';
          const titleEl = qs('#chosen-game-title');
          const descEl = qs('#chosen-game-desc');
          const videoEl = qs('#game-video');
          if (titleEl && descEl && videoEl) {
            titleEl.textContent = `You chose: ${selectedGameTitle}`;
            descEl.textContent = selectedGameDesc;
            videoEl.setAttribute('data-src', src);
            goToPage('page_confirm');
          } else {
            console.error('Missing elements:', { titleEl, descEl, videoEl });
          }
        });
      });
    }
    
    window.onload = () => initializeCardSlider('#game-card-container');
  </script>
</body>
</html>